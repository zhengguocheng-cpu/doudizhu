# 音效系统测试指南

## 🎵 测试准备

### 1. 刷新浏览器
确保加载最新代码：
```
按 F5 或 Ctrl+R 刷新页面
```

### 2. 检查控制台
打开浏览器开发者工具（F12），查看控制台输出：
- ✅ `TempSoundGenerator initialized`
- ✅ `SoundManager loaded and ready`

---

## 🧪 测试步骤

### 测试1：点击音效 🖱️

**操作**：
1. 进入房间页面
2. 点击"开始游戏"按钮

**预期结果**：
- ✅ 听到短促的"哔"声（800Hz，50ms）
- ✅ 控制台显示：`🔊 音效系统已初始化`

**如果没有声音**：
- 检查浏览器是否静音
- 检查系统音量
- 查看控制台是否有错误

---

### 测试2：出牌音效 🎴

**操作**：
1. 开始游戏并发牌
2. 轮到自己时，选择牌并点击"出牌"

**预期结果**：

#### 普通牌型（单牌、对子、三张等）
- ✅ 听到中频音效（500Hz，150ms）

#### 炸弹 💣
- ✅ 听到低频爆炸音效（100Hz，500ms）
- ✅ 音量较大，有震撼感

#### 王炸 🚀
- ✅ 听到上升音调（200Hz → 1000Hz，400ms）
- ✅ 有"嗖"的感觉

#### 飞机 ✈️
- ✅ 听到快速上升音阶（5个音符）
- ✅ 每个音符间隔40ms

---

### 测试3：不出音效 ❌

**操作**：
1. 轮到自己时，点击"不出"按钮

**预期结果**：
- ✅ 听到低沉的音效（300Hz，200ms）
- ✅ 有"拒绝"的感觉

---

### 测试4：提示音效 💡

**操作**：
1. 轮到自己时，点击"提示"按钮

**预期结果**：
- ✅ 听到清脆的高频音效（1000Hz，100ms）
- ✅ 像"叮"的一声

---

## 🔊 音效列表

### 当前已实现的音效

| 音效名称 | 触发时机 | 频率 | 时长 | 类型 |
|---------|---------|------|------|------|
| click | 点击按钮 | 800Hz | 50ms | sine |
| play | 普通出牌 | 500Hz | 150ms | triangle |
| bomb | 炸弹 | 100Hz | 500ms | sawtooth |
| rocket | 王炸 | 200→1000Hz | 400ms | sawtooth |
| plane | 飞机 | 400→800Hz | 5×60ms | square |
| pass | 不出 | 300Hz | 200ms | sawtooth |
| hint | 提示 | 1000Hz | 100ms | sine |

### 待实现的音效

| 音效名称 | 触发时机 | 状态 |
|---------|---------|------|
| deal | 发牌 | 🔄 计划中 |
| bid | 抢地主 | 🔄 计划中 |
| landlord | 地主确定 | 🔄 计划中 |
| win | 胜利 | 🔄 计划中 |
| lose | 失败 | 🔄 计划中 |
| warning | 警告 | 🔄 计划中 |
| timer | 倒计时 | 🔄 计划中 |

---

## 🐛 常见问题

### Q: 完全听不到声音？

**A: 检查以下几点**：
1. 浏览器是否允许自动播放音频
2. 系统音量是否打开
3. 浏览器标签页是否静音
4. 是否点击了页面（需要用户交互后才能播放）

**解决方法**：
```javascript
// 在控制台手动测试
TempSoundGenerator.click();
```

---

### Q: 音效延迟？

**A: 可能原因**：
1. 浏览器性能问题
2. AudioContext未正确初始化

**解决方法**：
```javascript
// 检查AudioContext状态
console.log(TempSoundGenerator.audioContext.state);
// 应该显示 "running"
```

---

### Q: 音效太小声？

**A: 调整音量**：
```javascript
// 增大音量（0.0 - 1.0）
TempSoundGenerator.setVolume(0.5);
```

---

### Q: 音效太吵？

**A: 降低音量或静音**：
```javascript
// 降低音量
TempSoundGenerator.setVolume(0.1);

// 或者禁用音效
TempSoundGenerator.setEnabled(false);
```

---

## 🎨 自定义音效

### 修改音效参数

在 `TempSoundGenerator.js` 中修改：

```javascript
// 例如：修改点击音效
click() {
    // 原来：800Hz, 50ms
    this.playTone(800, 50, 'sine');
    
    // 改为：1000Hz, 100ms
    this.playTone(1000, 100, 'sine');
}
```

### 音调类型

- `sine` - 正弦波（柔和）
- `square` - 方波（电子感）
- `sawtooth` - 锯齿波（粗糙）
- `triangle` - 三角波（中性）

---

## 📊 性能测试

### 检查音效性能

```javascript
// 测试连续播放
for (let i = 0; i < 10; i++) {
    setTimeout(() => {
        TempSoundGenerator.click();
    }, i * 100);
}
```

**预期结果**：
- ✅ 每个音效都能正常播放
- ✅ 没有卡顿或延迟
- ✅ 音效之间不会相互干扰

---

## 🔄 下一步

### 短期（本周）
- [ ] 添加发牌音效
- [ ] 添加抢地主音效
- [ ] 添加游戏结束音效
- [ ] 添加音量控制UI

### 中期（下周）
- [ ] 下载真实音效文件
- [ ] 替换临时音效
- [ ] 添加背景音乐
- [ ] 性能优化

### 长期（下月）
- [ ] 音效主题系统
- [ ] 自定义音效
- [ ] 音效可视化
- [ ] 音效预加载

---

## 📝 测试报告模板

```markdown
### 测试日期：2025-10-29
### 测试人员：[你的名字]
### 浏览器：Chrome/Firefox/Safari
### 系统：Windows/Mac/Linux

#### 测试结果

| 测试项 | 状态 | 备注 |
|-------|------|------|
| 点击音效 | ✅/❌ | |
| 出牌音效 | ✅/❌ | |
| 炸弹音效 | ✅/❌ | |
| 王炸音效 | ✅/❌ | |
| 飞机音效 | ✅/❌ | |
| 不出音效 | ✅/❌ | |
| 提示音效 | ✅/❌ | |

#### 问题记录
1. [描述问题]
2. [描述问题]

#### 建议
1. [改进建议]
2. [改进建议]
```

---

**创建时间**: 2025-10-29
**最后更新**: 2025-10-29
**维护者**: 开发团队
