# 斗地主游戏自动化测试

## 📋 测试页面说明

这是一个完整的自动化测试页面，用于测试斗地主游戏的所有功能。

## 🚀 如何使用

### 1. 启动服务器

确保后端服务器正在运行：

```bash
cd backend
npm run dev
```

### 2. 访问测试页面

在浏览器中打开：

```
http://localhost:3000/test/game-test.html
```

### 3. 运行测试

点击页面上的 **"🚀 运行所有测试"** 按钮，系统将自动执行所有测试步骤。

## 📊 测试内容

### 测试1: 用户认证测试
- ✅ 步骤 1.1: 创建3个测试用户
- ✅ 步骤 1.2: 验证用户信息

### 测试2: 房间管理测试
- ✅ 步骤 2.1: 获取房间列表
- ✅ 步骤 2.2: 玩家加入房间
- ✅ 步骤 2.3: 验证房间状态

### 测试3: 游戏准备测试
- ✅ 步骤 3.1: 玩家准备
- ✅ 步骤 3.2: 验证准备状态同步
- ✅ 步骤 3.3: 自动开始游戏

### 测试4: 游戏流程测试
- ✅ 步骤 4.1: 发牌验证
- ✅ 步骤 4.2: 叫地主流程
- ✅ 步骤 4.3: 出牌回合

### 测试5: 聊天功能测试
- ✅ 步骤 5.1: 发送聊天消息
- ✅ 步骤 5.2: 验证消息同步

## 🎮 控制按钮

- **🚀 运行所有测试**: 自动运行所有测试步骤
- **⏸️ 暂停测试**: 暂停/继续测试执行
- **⏹️ 停止测试**: 停止测试并断开所有连接
- **🗑️ 清除日志**: 清除日志输出

## 📝 测试步骤说明

### 单独运行测试步骤

每个测试步骤都可以单独运行：
1. 点击测试部分标题展开/折叠
2. 点击步骤右侧的 **"运行"** 按钮执行单个步骤

### 查看测试日志

- 页面底部的日志区域会实时显示测试进度
- 不同类型的日志用不同颜色标识：
  - 🔵 蓝色: 信息日志
  - ✅ 绿色: 成功日志
  - ❌ 红色: 错误日志
  - ⚠️ 黄色: 警告日志

### 进度跟踪

- 页面顶部的进度条显示整体测试进度
- 每个测试部分的标题右侧显示状态图标：
  - ⏳ 等待中
  - 🔄 运行中
  - ✅ 成功
  - ❌ 失败

## 🔧 测试配置

测试使用以下配置：

```javascript
testPlayers = [
    { name: 'TestPlayer001', avatar: '🤖' },
    { name: 'TestPlayer002', avatar: '🎮' },
    { name: 'TestPlayer003', avatar: '🎯' }
]
```

服务器地址: `http://localhost:3000`

## 📈 预期结果

所有测试步骤都应该成功通过，显示绿色的 ✅ 图标。

如果某个步骤失败：
1. 查看日志输出了解错误原因
2. 检查后端服务器是否正常运行
3. 检查网络连接
4. 查看浏览器控制台的错误信息

## 🐛 故障排除

### 连接失败
- 确保后端服务器在 `http://localhost:3000` 运行
- 检查防火墙设置
- 查看后端日志

### 测试超时
- 增加测试步骤之间的延迟时间
- 检查服务器性能

### 房间不可用
- 确保至少有一个可用房间
- 检查房间最大玩家数设置

## 📞 技术支持

如有问题，请检查：
1. 后端服务器日志
2. 浏览器控制台
3. 测试页面日志输出

## 🎯 测试目标

通过这个自动化测试页面，我们可以：
- ✅ 验证所有核心功能正常工作
- ✅ 确保多玩家同步正常
- ✅ 检测潜在的bug和问题
- ✅ 提高开发效率
- ✅ 保证代码质量

## 📚 扩展测试

你可以轻松添加新的测试步骤：

1. 在 HTML 中添加新的测试部分
2. 在 JavaScript 中实现对应的测试方法
3. 将步骤ID添加到 `allSteps` 数组

示例：

```javascript
async runStep_6_1() {
    this.log('开始新测试...', 'info');
    this.updateStepStatus('6-1', 'running');
    
    try {
        // 测试逻辑
        this.updateStepStatus('6-1', 'success');
        return true;
    } catch (error) {
        this.updateStepStatus('6-1', 'error');
        return false;
    }
}
```

祝测试顺利！🎉
