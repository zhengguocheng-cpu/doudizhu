# æ–—åœ°ä¸»æ¸¸æˆç³»ç»Ÿæ¶æ„æ–‡æ¡£

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-11  
> **é€‚ç”¨èŒƒå›´**: å‰ç«¯ + åç«¯å®Œæ•´ç³»ç»Ÿ

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è§ˆ](#ç³»ç»Ÿæ¦‚è§ˆ)
2. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
3. [æ•´ä½“æ¶æ„](#æ•´ä½“æ¶æ„)
4. [å‰ç«¯æ¶æ„](#å‰ç«¯æ¶æ„)
5. [åç«¯æ¶æ„](#åç«¯æ¶æ„)
6. [å®Œæ•´æ¸¸æˆæµç¨‹](#å®Œæ•´æ¸¸æˆæµç¨‹)
7. [Socketäº‹ä»¶äº¤äº’](#socketäº‹ä»¶äº¤äº’)
8. [è®¾è®¡æ¨¡å¼åº”ç”¨](#è®¾è®¡æ¨¡å¼åº”ç”¨)
9. [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
10. [å…³é”®ç»„ä»¶è¯´æ˜](#å…³é”®ç»„ä»¶è¯´æ˜)

---

## ç³»ç»Ÿæ¦‚è§ˆ

### ğŸ¯ é¡¹ç›®å®šä½
å¤šäººåœ¨çº¿æ–—åœ°ä¸»æ¸¸æˆï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒå®æ—¶å¯¹æˆ˜ã€AIæç¤ºã€èŠå¤©ç­‰åŠŸèƒ½ã€‚

### ğŸ—ï¸ æ¶æ„ç‰¹ç‚¹
- **å‰åç«¯åˆ†ç¦»**: React SPA + Node.js Backend
- **å®æ—¶é€šä¿¡**: Socket.IOåŒå‘é€šä¿¡
- **çŠ¶æ€ç®¡ç†**: Redux Toolkité›†ä¸­å¼çŠ¶æ€
- **è®¾è®¡æ¨¡å¼**: 5ç§ç»å…¸è®¾è®¡æ¨¡å¼åº”ç”¨
- **æ¨¡å—åŒ–è®¾è®¡**: é«˜å†…èšã€ä½è€¦åˆçš„ä»£ç ç»„ç»‡

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯æ ˆ
```
- React 18.2.0          # UIæ¡†æ¶
- TypeScript            # ç±»å‹å®‰å…¨
- Redux Toolkit         # çŠ¶æ€ç®¡ç†
- Socket.IO Client      # å®æ—¶é€šä¿¡
- React Router          # è·¯ç”±ç®¡ç†
- CSS3                  # æ ·å¼
```

### åç«¯æŠ€æœ¯æ ˆ
```
- Node.js               # è¿è¡Œæ—¶
- TypeScript            # ç±»å‹å®‰å…¨
- Socket.IO             # WebSocketæœåŠ¡
- Express (å¯é€‰)        # HTTPæœåŠ¡
```

---

## æ•´ä½“æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯å±‚ (SPA)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  React Components  â”‚  Redux Store  â”‚  Socket.IO Client      â”‚
â”‚  - GameRoom        â”‚  - gameSlice  â”‚  - globalSocket        â”‚
â”‚  - HandCards       â”‚  - userSlice  â”‚  - Event Handlers      â”‚
â”‚  - UI Components   â”‚               â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                â”‚
                     â”‚   HTTP/WS      â”‚
                     â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é€šä¿¡å±‚ (Socket.IO)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŒå‘å®æ—¶é€šä¿¡  â”‚  äº‹ä»¶å¹¿æ’­  â”‚  æˆ¿é—´éš”ç¦»  â”‚  è¿æ¥ç®¡ç†       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       åç«¯å±‚ (Services)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SocketEventHandler  â”‚  GameFlowHandler  â”‚  CardPlayHandler â”‚
â”‚  - äº‹ä»¶è·¯ç”±          â”‚  - æ¸¸æˆæµç¨‹æ§åˆ¶   â”‚  - å‡ºç‰Œé€»è¾‘      â”‚
â”‚  - å‚æ•°éªŒè¯          â”‚  - çŠ¶æ€è½¬æ¢       â”‚  - ç‰Œå‹è¯†åˆ«      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸šåŠ¡é€»è¾‘å±‚ (Core)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RoomService    â”‚  PlayerService  â”‚  CardService           â”‚
â”‚  GameEngine     â”‚  ScoreCalculatorâ”‚  CardPlayValidator     â”‚
â”‚  - æˆ¿é—´ç®¡ç†     â”‚  - ç©å®¶ç®¡ç†     â”‚  - æ‰‘å…‹ç‰Œé€»è¾‘          â”‚
â”‚  - æ¸¸æˆè§„åˆ™     â”‚  - AIæœºå™¨äºº     â”‚  - åˆ†æ•°è®¡ç®—            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å‰ç«¯æ¶æ„

### æ ¸å¿ƒç»“æ„

```
frontend-spa/src/
â”œâ”€â”€ pages/GameRoom/           # æ¸¸æˆä¸»é¡µé¢
â”‚   â”œâ”€â”€ index.tsx            # ä¸»ç»„ä»¶ (1790è¡Œ)
â”‚   â”œâ”€â”€ components/          # UIç»„ä»¶
â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ logic/               # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ patterns/            # è®¾è®¡æ¨¡å¼
â”‚   â”œâ”€â”€ events/              # äº‹ä»¶å¤„ç†
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”œâ”€â”€ store/                   # ReduxçŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ slices/
â”‚       â””â”€â”€ gameSlice.ts     # æ¸¸æˆçŠ¶æ€
â”œâ”€â”€ services/                # æœåŠ¡å±‚
â”‚   â””â”€â”€ socket.ts            # Socketè¿æ¥
â””â”€â”€ utils/                   # å…¨å±€å·¥å…·
```

### çŠ¶æ€ç®¡ç† (Redux)

**gameSlice.ts** - æ¸¸æˆçŠ¶æ€åˆ‡ç‰‡ï¼š
```typescript
{
  players: Player[]          // ç©å®¶åˆ—è¡¨
  gameStatus: GameStatus     // waiting | bidding | playing | finished
  currentPlayerId: string    // å½“å‰ç©å®¶ID
  myCards: string[]          // æˆ‘çš„æ‰‹ç‰Œ
  selectedCards: string[]    // é€‰ä¸­çš„ç‰Œ
  lastPlayedCards: {         // æœ€åå‡ºçš„ç‰Œ
    playerId, cards, type
  }
  landlordId: string         // åœ°ä¸»ID
  landlordCards: string[]    // åœ°ä¸»åº•ç‰Œ
  scores: ScoreData          // ç§¯åˆ†æ•°æ®
}
```

### ç»„ä»¶å±‚æ¬¡

```
GameRoom (ä¸»å®¹å™¨)
â”œâ”€â”€ TopPlayersArea          # ä¸Šæ–¹ä¸¤ä½ç©å®¶
â”‚   â”œâ”€â”€ PlayerDisplay (å·¦)
â”‚   â””â”€â”€ PlayerDisplay (å³)
â”œâ”€â”€ CenterResultPanel       # ä¸­å¤®ç»“ç®—é¢æ¿
â”œâ”€â”€ BottomCards             # åº•ç‰Œå±•ç¤º
â”œâ”€â”€ BottomPlayedCards       # åº•éƒ¨å‡ºç‰ŒåŒº
â”œâ”€â”€ BottomPlayerInfo        # åº•éƒ¨ç©å®¶ä¿¡æ¯
â”œâ”€â”€ HandCards               # æ‰‹ç‰ŒåŒºåŸŸ
â”œâ”€â”€ GameActions             # æ“ä½œæŒ‰é’®
â”‚   â”œâ”€â”€ æç¤º
â”‚   â”œâ”€â”€ å‡ºç‰Œ
â”‚   â””â”€â”€ ä¸å‡º
â”œâ”€â”€ BiddingControls         # æŠ¢åœ°ä¸»UI
â””â”€â”€ ChatContainer           # èŠå¤©å®¹å™¨
```

### è‡ªå®šä¹‰Hooks

| Hook | èŒè´£ | è¡Œæ•° |
|------|------|------|
| `useGameUI` | UIçŠ¶æ€ç®¡ç† | ~200 |
| `useGameTimer` | æ¸¸æˆè®¡æ—¶å™¨ | ~150 |
| `useWalletScore` | ç§¯åˆ†é’±åŒ… | ~100 |
| `useAutoPlay` | è‡ªåŠ¨å‡ºç‰Œ | ~180 |

---

